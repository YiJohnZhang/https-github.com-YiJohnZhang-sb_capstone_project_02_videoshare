{
	"_comment": "it is business logic that checks whether or not the 'share' properties add up to <1.00",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"title": "Content, New",
	"description": "A schema specification for new Content records.",
	"type": "object",
	"properties": {
		"title": {
			"type": "string", "minLength": 4, "maxLength": 64
		},
		"summary": {
			"type": "string", "maxLength": 512
		},
		"description": {
			"type": "string", "maxLength": 2200
		},
		"owner": {
			"type": "string", "minLength": 4, "maxLength": 32
		},
		"contractType": {
			"type": "string", "enum": ["single", "byview", "presplit"]
		},
		"participants": {
			"type": "array",
			"items": [{
				"type": "string", "minLength": 4, "maxLength": 32
			}],
			"minItems": 1,
			"uniqueItems": true
		},
		"contractDetails": {
			"type": "object",
			"properties": {
				"views": {
					"type": "array",
					"items": [{
						"type": "object",
						"properties": {
							"username": {"type": "string"},
							"share": {"type": "number"}
						},
						"required": ["username", "share"]
					}],
					"minItems": 1,
					"uniqueItems": true
				},
				"engagement": {
					"type": "array",
					"items": [{
						"type": "object",
						"properties": {
							"username": {"type": "string"},
							"share": {"type": "number"}
						},
						"required": ["username", "share"]
					}],
					"minItems": 1,
					"uniqueItems": true
				}
			},
			"required": ["views", "engagement"]
		},
		"contractSigned": {
			"type": "array",
			"items": [{
				"type": "string", "minLength": 4, "maxLength": 32
			}],
			"uniqueItems": true
		}
	},
	"required": [
		"title",
		"summary",
		"owner",
		"contractType",
		"participants"
	],
	"additionalProperties": false

}